<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Base</title>
    <link rel="stylesheet" href="/static/style_v2.css">
</head>
<body>
    <div class="container">
        
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                <h1>Knowledge Base</h1>
            </div>
            <p class="subtitle">Cerca tra 14.000+ documenti tecnici</p>
        </header>

        <!-- Main Content -->
        <div class="main-layout">
            
            <!-- Sidebar Filters -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h3>üéõÔ∏è Filtri</h3>
                    <button class="btn-icon" id="btn-toggle-sidebar" title="Nascondi filtri">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                </div>

                <div class="filter-group">
                    <label for="f-area">üìÅ Area</label>
                    <select id="f-area">
                        <option value="">Tutte</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-anno">üìÖ Anno</label>
                    <select id="f-anno">
                        <option value="">Tutti</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-cliente">üë• Cliente</label>
                    <select id="f-cliente">
                        <option value="">Tutti</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-oggetto">üéØ Oggetto</label>
                    <select id="f-oggetto">
                        <option value="">Tutti</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-tipo">üìÑ Tipo Documento</label>
                    <select id="f-tipo">
                        <option value="">Tutti</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-categoria">üè∑Ô∏è Categoria</label>
                    <select id="f-categoria">
                        <option value="">Tutte</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="f-ext">üìé Estensione</label>
                    <select id="f-ext">
                        <option value="">Tutte</option>
                    </select>
                </div>

                <div class="filter-actions">
                    <button class="btn btn-primary" id="btn-apply">Applica</button>
                    <button class="btn btn-secondary" id="btn-reset">Reset</button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="content">
                
                <!-- Search Box -->
                <div class="search-section">
                    <div class="search-box">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input 
                            type="text" 
                            id="q" 
                            placeholder="Cerca documenti, progetti, gare..."
                            autocomplete="off"
                        >
                        <button class="btn-search" id="btn-search">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>

                    <!-- Search Mode -->
                    <div class="search-mode">
                        <label class="mode-option">
                            <input type="radio" name="mode" value="hybrid" checked>
                            <span>
                                <strong>Hybrid</strong>
                                <small>Semantica + Metadati</small>
                            </span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="mode" value="semantic">
                            <span>
                                <strong>Semantica Pura</strong>
                                <small>
                                    <select id="model">
                                        <option value="sentence-transformer">Sentence Transformer</option>
                                        <option value="llama3">LLaMA 3</option>
                                        <option value="mistral">Mistral</option>
                                    </select>
                                </small>
                            </span>
                        </label>
                    </div>

                    <!-- Suggestions -->
                    <div class="suggestions">
                        <span class="suggestions-label">üí° Prova con:</span>
                        <button class="suggestion-pill" onclick="searchSuggestion('architettura cloud multitenant')">architettura cloud multitenant</button>
                        <button class="suggestion-pill" onclick="searchSuggestion('telemedicina asincrona')">telemedicina asincrona</button>
                        <button class="suggestion-pill" onclick="searchSuggestion('gare sanitarie 2024')">gare sanitarie 2024</button>
                        <button class="suggestion-pill" onclick="searchSuggestion('cartella clinica elettronica')">cartella clinica elettronica</button>
                        <button class="suggestion-pill" onclick="searchSuggestion('specifiche tecniche ARIA')">specifiche tecniche ARIA</button>
                    </div>

                    <!-- Advanced Toggle -->
                    <button class="advanced-toggle" id="advanced-toggle">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="4" y1="21" x2="4" y2="14"></line>
                            <line x1="4" y1="10" x2="4" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12" y2="3"></line>
                            <line x1="20" y1="21" x2="20" y2="16"></line>
                            <line x1="20" y1="12" x2="20" y2="3"></line>
                        </svg>
                        Ricerca Avanzata
                    </button>
                </div>

                <!-- Search Stats -->
                <div class="search-stats" id="search-stats" style="display: none;">
                    <strong id="total-results">0</strong> risultati 
                    <span class="muted" id="search-time"></span>
                </div>

                <!-- Results -->
                <div id="results">
                    <div class="welcome-card">
                        <h2>üëã Benvenuto nella Knowledge Base!</h2>
                        <p>Inserisci una parola chiave per iniziare la ricerca.</p>
                        <p>Usa i filtri laterali per affinare i risultati.</p>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination" style="display: none;">
                    <button class="btn btn-secondary" id="btn-prev" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Precedente
                    </button>
                    <span class="page-info" id="page-info"></span>
                    <button class="btn btn-secondary" id="btn-next">
                        Successiva
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>

            </main>

        </div>

    </div>

    <script src="/static/app_v2.js"></script>
    <script>
        // Toggle sidebar
        document.getElementById('btn-toggle-sidebar')?.addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            const content = document.querySelector('.content');
            sidebar.classList.toggle('collapsed');
            content.classList.toggle('expanded');
        });

        // Search suggestion
        function searchSuggestion(query) {
            document.getElementById('q').value = query;
            doSearch();
        }
    </script>
</body>
</html>
